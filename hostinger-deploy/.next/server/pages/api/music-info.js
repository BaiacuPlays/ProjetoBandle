"use strict";(()=>{var e={};e.id=781,e.ids=[781],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6544:e=>{e.exports=import("node-fetch")},4718:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},556:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>c,routeModule:()=>d});var n=a(9762),o=a(6059),i=a(4718),s=a(7159),l=e([s]);s=(l.then?(await l)():l)[0];let c=(0,i.l)(s,"default"),u=(0,i.l)(s,"config"),d=new n.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/music-info",pathname:"/api/music-info",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})},7159:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>i});var n=a(6544),o=e([n]);n=(o.then?(await o)():o)[0];let l=e=>new Promise(t=>setTimeout(t,e));async function i(e,t){let a=e.headers.origin;if(["https://ludomusic.xyz","https://www.ludomusic.xyz","http://localhost:3000","http://127.0.0.1:3000","https://bandle-git-main-baiacuplays-projects.vercel.app","https://bandle-baiacuplays-projects.vercel.app"].includes(a)||!a?t.setHeader("Access-Control-Allow-Origin",a||"*"):t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Credentials","true"),t.setHeader("Access-Control-Allow-Methods","GET,OPTIONS,POST,PUT,DELETE,HEAD"),t.setHeader("Access-Control-Allow-Headers","X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization, Cache-Control, Pragma"),t.setHeader("Access-Control-Max-Age","86400"),t.setHeader("Content-Type","application/json"),t.setHeader("Vary","Origin"),"OPTIONS"===e.method)return t.status(200).end();let{title:r,game:o}=e.query;if(!r||!o)return t.status(400).json({error:"Title and game are required"});try{let e=encodeURIComponent(`${o} ${r}`),a=await (0,n.default)(`https://vgmdb.net/search?q=${e}`,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9"}});if(!a.ok)throw Error(`Failed to fetch from VGMdb: ${a.status}`);let i=(await a.text()).match(/href="(\/album\/\d+)"/);if(!i)return t.status(404).json({error:"No results found",searchQuery:`${o} ${r}`});await l(2e3);let c=`https://vgmdb.net${i[1]}`,u=await (0,n.default)(c,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9"}});if(!u.ok)throw Error(`Failed to fetch album details: ${u.status}`);let d=await u.text(),p=d.match(/<h1[^>]*>([^<]+)<\/h1>/),m=d.match(/Composer<\/b><\/td>\s*<td[^>]*>([^<]+)/),h=d.match(/Release Date<\/b><\/td>\s*<td[^>]*>(\d{4})-/),f=d.match(/Platform<\/b><\/td>\s*<td[^>]*>([^<]+)<\/td>/),A={artist:m?s(m[1]):"Unknown Artist",year:h?h[1]:"Unknown Year",album:p?s(p[1]):"Unknown Album",console:f?s(f[1]):"Unknown Platform",debug:{url:c,query:`${o} ${r}`}};if("Unknown Year"!==A.year){let e=parseInt(A.year);(e<1970||e>new Date().getFullYear())&&(A.year="Unknown Year")}t.status(200).json(A)}catch(e){console.error("Error fetching from VGMdb:",e),t.status(500).json({error:"Failed to fetch music info",message:e.message})}}function s(e){return e.replace(/<[^>]*>/g,"").replace(/&[^;]+;/g,"").replace(/\s+/g," ").trim()}r()}catch(e){r(e)}})},6059:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},9762:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=556);module.exports=a})();