(()=>{var e={};e.id=271,e.ids=[271],e.modules={1323:(e,a)=>{"use strict";Object.defineProperty(a,"l",{enumerable:!0,get:function(){return function e(a,r){return r in a?a[r]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,r)):"function"==typeof a&&"default"===r?a:void 0}}})},7663:e=>{e.exports={container:"Multiplayer_container__pG5zq",content:"Multiplayer_content__paqrY",lobbyContainer:"Multiplayer_lobbyContainer__mFUxx",title:"Multiplayer_title__c2wel",buttonGroup:"Multiplayer_buttonGroup__MtTI1",primaryButton:"Multiplayer_primaryButton__5Qr0G",secondaryButton:"Multiplayer_secondaryButton__fOHZA",form:"Multiplayer_form__NEyLG",inputGroup:"Multiplayer_inputGroup__xUkyP",label:"Multiplayer_label__JdhkF",input:"Multiplayer_input__d_6vv",waitingRoom:"Multiplayer_waitingRoom__TnsCI",roomCode:"Multiplayer_roomCode__xMu8X",playersList:"Multiplayer_playersList__JTt5d",playersTitle:"Multiplayer_playersTitle__GDwhB",playerItem:"Multiplayer_playerItem__ueGdP",playerName:"Multiplayer_playerName__98Zrf",hostBadge:"Multiplayer_hostBadge__XJkEC",gameContainer:"Multiplayer_gameContainer__BNvB0",gameHeader:"Multiplayer_gameHeader__zIa0f",roundInfo:"Multiplayer_roundInfo__29inF",scoreBoard:"Multiplayer_scoreBoard__RE7qE",scoreItem:"Multiplayer_scoreItem__LDz9_",currentPlayer:"Multiplayer_currentPlayer__Bc1B2",pointsInfo:"Multiplayer_pointsInfo___JMag",pointsText:"Multiplayer_pointsText__wVJq1",pointsExplanation:"Multiplayer_pointsExplanation__pVq8O",pointsEarned:"Multiplayer_pointsEarned__8c11S",hintBox:"Multiplayer_hintBox__Gctzd",message:"Multiplayer_message__O7bg0",messageSuccess:"Multiplayer_messageSuccess__X0lOU",messageError:"Multiplayer_messageError__Dhxdu",messageInfo:"Multiplayer_messageInfo__86_jG",messageWarning:"Multiplayer_messageWarning__ei_9w",loading:"Multiplayer_loading__U_sZC",spinner:"Multiplayer_spinner__kPnfW",spin:"Multiplayer_spin__sGivk"}},255:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{config:()=>y,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>p,getStaticProps:()=>m,reportWebVitals:()=>E,routeModule:()=>N,unstable_getServerProps:()=>D,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>h});var o=r(7093),s=r(5244),n=r(1323),i=r(6105),l=r(6719),c=r(5338),d=e([c]);c=(d.then?(await d)():d)[0];let u=(0,n.l)(c,"default"),m=(0,n.l)(c,"getStaticProps"),p=(0,n.l)(c,"getStaticPaths"),g=(0,n.l)(c,"getServerSideProps"),y=(0,n.l)(c,"config"),E=(0,n.l)(c,"reportWebVitals"),h=(0,n.l)(c,"unstable_getStaticProps"),x=(0,n.l)(c,"unstable_getStaticPaths"),_=(0,n.l)(c,"unstable_getStaticParams"),D=(0,n.l)(c,"unstable_getServerProps"),C=(0,n.l)(c,"unstable_getServerSideProps"),N=new o.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/multiplayer",pathname:"/multiplayer",bundlePath:"",filename:""},components:{App:l.default,Document:i.default},userland:c});t()}catch(e){t(e)}})},6418:(e,a,r)=>{"use strict";r.d(a,{Z:()=>p});var t=r(997),o=r(6689),s=r(4746),n=r(9017),i=r(6507),l=r(7663),c=r.n(l),d=r(9532),u=r.n(d),m=r(4066);let p=({onBackToLobby:e})=>{console.log("\uD83C\uDFAE JOGO - MultiplayerGame renderizado"),console.log("\uD83C\uDFB5 SONGS - Total de m\xfasicas carregadas:",i.x.length),console.log("\uD83C\uDFB5 SONGS - Primeiras 3 m\xfasicas:",i.x.slice(0,3).map(e=>e.title));let{t:a,isClient:r}=(0,s.Z)(),{state:l,actions:d}=(0,n.p)(),{playerNickname:p,lobbyData:g,error:y}=l;console.log("\uD83C\uDFAE JOGO - lobbyData:",g),console.log("\uD83C\uDFAE JOGO - gameStarted:",g?.gameStarted);let[E,h]=(0,o.useState)(""),[x,_]=(0,o.useState)(!1),[D,C]=(0,o.useState)([]),[N,S]=(0,o.useState)(!1),[j,b]=(0,o.useState)(!1),[f,v]=(0,o.useState)(0),[T,R]=(0,o.useState)(1),[A,O]=(0,o.useState)(!1),[B,k]=(0,o.useState)(0),M=(0,o.useRef)(null),L=(0,o.useRef)(null),P=g?.gameState,G=g?.currentSong,w=g?.host===p,F=P?.roundWinners||[],I=P?.roundFinished||!1,$=P?.gameFinished,Y=P?.attempts?.[p]||0;console.log("\uD83D\uDD0D DEBUG - Estado da rodada:",{roundFinished:I,isHost:w,roundWinners:F,myAttempts:Y,gameState:P?"exists":"null"});let U=[.6,1.2,2,3,3.5,4.2],z=F.includes(p),J=G;if(!J&&P?.songs&&P.songs.length>0){let e=(P.currentRound||1)-1;J=P.songs[e]}!J&&P?.currentSong&&(J=i.x.find(e=>e.title.trim().toLowerCase()===P.currentSong.trim().toLowerCase()));let q=(e,a)=>31*a%997/997*Math.max(0,e-10);(0,o.useEffect)(()=>{let e=G;if(!e&&P?.songs&&P.songs.length>0){let a=(P.currentRound||1)-1;e=P.songs[a]}if(!e&&P?.currentSong&&(e=i.x.find(e=>e.title.trim().toLowerCase()===P.currentSong.trim().toLowerCase())),console.log("\uD83C\uDFB5 AUDIO - Configurando \xe1udio para:",e?.title),e&&M.current){let a=()=>{let a=q(M.current.duration||0,e.id);k(a),M.current.currentTime=a,v(0),console.log("\uD83C\uDFB5 AUDIO - Metadata carregada, startTime:",a)},r=()=>{console.error("\uD83C\uDFB5 AUDIO - Erro ao carregar \xe1udio:",e.audioUrl)};return M.current.addEventListener("loadedmetadata",a),M.current.addEventListener("error",r),()=>{M.current&&(M.current.removeEventListener("loadedmetadata",a),M.current.removeEventListener("error",r))}}},[G,P?.songs,P?.currentRound,P?.currentSong]),(0,o.useEffect)(()=>{let e=M.current;if(!e)return;let a=z?15:U[Y]||U[U.length-1],r=()=>{let r=e.currentTime-B;r>=15?(e.pause(),b(!1),e.currentTime=B,v(0)):!z&&r>=a?(e.pause(),b(!1),e.currentTime=B,v(0)):v(r)},t=()=>{b(!e.paused)};return e.addEventListener("timeupdate",r),e.addEventListener("play",t),e.addEventListener("pause",t),()=>{e.removeEventListener("timeupdate",r),e.removeEventListener("play",t),e.removeEventListener("pause",t)}},[B,Y,z]),(0,o.useEffect)(()=>{console.log("\uD83C\uDFB5 ROUND CHANGE - Rodada mudou:",P?.currentRound),M.current&&(M.current.pause(),b(!1),v(0),void 0!==B&&(M.current.currentTime=B),console.log("\uD83C\uDFB5 ROUND CHANGE - Estado do \xe1udio resetado")),h(""),_(!1),C([]),O(!1),console.log("\uD83C\uDFAE ROUND CHANGE - Interface resetada")},[P?.currentRound,B]),(0,o.useEffect)(()=>{M.current&&J?.audioUrl&&(console.log("\uD83C\uDFB5 AUDIO URL - Nova URL de \xe1udio:",J.audioUrl),M.current.pause(),b(!1),v(0),M.current.load())},[J?.audioUrl]);let V=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]/g,""),W=(e,a)=>{let r=V(e.title),t=V(e.game),o=V(e.artist),s=V(a);return r.includes(s)?1:t.includes(s)?2:o.includes(s)?3:4},X=e=>{if(e.length>0){let a=e.trim().split(/\s+/).filter(e=>e.length>0).map(e=>V(e)).filter(e=>e.length>1);if(0===a.length)return C([]),_(!1),[];let r=i.x.filter(e=>{let r=V(e.title),t=V(e.game),o=V(e.artist);return a.some(e=>r.includes(e)||t.includes(e)||o.includes(e))}).sort((a,r)=>{let t=W(a,e),o=W(r,e);if(t!==o)return t-o;let s=V(a.game).localeCompare(V(r.game));return 0!==s?s:V(a.title).localeCompare(V(r.title))}).slice(0,50);C(r),_(r.length>0)}else C([]),_(!1);return[]},H=e=>{h(e.title),_(!1)},Z=async e=>{if(e.preventDefault(),I||!E.trim()||isLoading||N){O(!0),setTimeout(()=>O(!1),500);return}let t=V(E);console.log("\uD83D\uDD0D GUESS - Tentativa normalizada:",t),console.log("\uD83D\uDD0D GUESS - Tentativa original:",E);let o=i.x.some(e=>{let a=V(e.title);return console.log("\uD83D\uDD0D SONG - Comparando com:",e.title,"→",a),a===t});if(console.log("\uD83D\uDD0D RESULT - M\xfasica existe?",o),!o){d.setError(r?a("select_from_list"):"Selecione uma m\xfasica da lista"),O(!0),setTimeout(()=>O(!1),500),setTimeout(()=>d.setError(""),3e3);return}S(!0),console.log("\uD83C\uDFAE GAME - Fazendo tentativa:",E);let s=await d.makeGuess(E.trim());S(!1),s.success?(console.log("\uD83C\uDFAE GAME - Tentativa enviada com sucesso:",s),h(""),_(!1),s.correct?s.tooLate?(console.log("\uD83C\uDFAE GAME - Acertou, mas chegou tarde!"),d.setError(s.message||"Algu\xe9m j\xe1 havia acertado primeiro!"),setTimeout(()=>d.setError(""),4e3)):(console.log("\uD83C\uDFAE GAME - Acertou a m\xfasica!"),d.setError("")):s.gameCorrect&&(console.log("\uD83C\uDFAE GAME - Acertou o jogo mas n\xe3o a m\xfasica!"),d.setError("Jogo correto! Tente adivinhar a m\xfasica espec\xedfica."),setTimeout(()=>d.setError(""),3e3))):(console.log("\uD83C\uDFAE GAME - Tentativa n\xe3o aceita:",s.error),O(!0),setTimeout(()=>O(!1),500))},K=async()=>{console.log("\uD83C\uDFAE GAME - Avan\xe7ando para pr\xf3xima rodada");let e=await d.nextRound();e.success?console.log("\uD83C\uDFAE GAME - Pr\xf3xima rodada iniciada"):console.log("\uD83C\uDFAE GAME - Erro ao avan\xe7ar rodada:",e.error)},Q=async()=>{console.log("\uD83C\uDFAE GAME - Pulando rodada");let e=await d.skipRound();e.success?console.log("\uD83C\uDFAE GAME - Rodada pulada"):console.log("\uD83C\uDFAE GAME - Erro ao pular rodada:",e.error)},ee=(e,a)=>{if(!e||0===a)return null;if(1===a){if(M.current&&M.current.duration){let e=M.current.duration,a=`${(Math.floor(e/60)||0).toString().padStart(2,"0")}:${(Math.floor(e%60)||0).toString().padStart(2,"0")}`;return`Dura\xe7\xe3o: ${a}`}return`Dura\xe7\xe3o: ~3:00`}return 2===a?`Ano de lan\xe7amento: ${e.year}`:3===a?`Artista: ${e.artist}`:4===a?`Console: ${e.console||"Desconhecido"}`:a>=5?`Franquia: ${e.game}`:null},ea=async()=>{d.reset(),e()},er=async()=>{console.log("\uD83C\uDFAE GAME - Reset do jogo"),e()},et=P?.scores?Object.entries(P.scores).map(([e,a])=>({player:e,score:a})).sort((e,a)=>a.score-e.score):[],eo=et.length>0?et[0].score:0,es=et.filter(e=>e.score===eo);return(console.log("\uD83C\uDFAE GAME - Verificando condi\xe7\xf5es:",{lobbyData:!!g,gameStarted:g?.gameStarted,gameState:!!P}),g&&g.gameStarted&&P)?(console.log("\uD83C\uDFAE GAME - Condi\xe7\xf5es atendidas, renderizando jogo"),t.jsx("div",{className:c().container,children:t.jsx("div",{className:c().content,children:(0,t.jsxs)("div",{className:c().gameContainer,children:[(0,t.jsxs)("div",{className:c().gameHeader,children:[t.jsx("div",{className:c().roundInfo,children:$?r?a("game_finished"):"Jogo Finalizado!":P.isTiebreaker?r?a("tiebreaker_round"):"Rodada de Desempate":`${r?a("round"):"Rodada"} ${P.currentRound}/${P.totalRounds}`}),t.jsx("div",{className:c().scoreBoard,children:Object.entries(P.scores||{}).map(([e,a])=>(0,t.jsxs)("div",{className:`${c().scoreItem} ${e===p?c().currentPlayer:""}`,children:[e,": ",a]},e))})]}),ee(J,Y)&&!$&&!I&&(0,t.jsxs)("div",{className:c().hintBox,children:[t.jsx("strong",{children:"Dica:"})," ",ee(J,Y)]}),$?(0,t.jsxs)("div",{style:{textAlign:"center"},children:[t.jsx("h2",{children:r?a("final_scores"):"Pontua\xe7\xe3o Final"}),(0,t.jsxs)("div",{className:c().pointsExplanation,children:[t.jsx("p",{children:"Sistema de Pontua\xe7\xe3o:"}),t.jsx("p",{children:"6 pontos (sem dicas) • 5 pontos (1 dica) • 4 pontos (2 dicas) • 3 pontos (3 dicas) • 2 pontos (4 dicas) • 1 ponto (5 dicas)"})]}),t.jsx("div",{style:{margin:"30px 0"},children:et.map((e,a)=>(0,t.jsxs)("div",{className:c().scoreItem,style:{margin:"10px auto",maxWidth:"300px",fontSize:0===a?"1.2rem":"1rem",fontWeight:0===a?"bold":"normal"},children:["#",a+1," ",e.player,": ",e.score," pontos"]},e.player))}),t.jsx("div",{className:`${c().message} ${c().messageSuccess}`,children:1===es.length?`${r?a("winner"):"Vencedor"}: ${es[0].player}!`:`${r?a("tie"):"Empate"}! ${es.map(e=>e.player).join(", ")}`}),(0,t.jsxs)("div",{className:c().buttonGroup,children:[t.jsx("button",{className:c().secondaryButton,onClick:ea,children:r?a("back_to_lobby"):"Voltar ao Lobby"}),w&&t.jsx("button",{className:c().primaryButton,onClick:er,children:r?a("play_again"):"Jogar Novamente"})]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:u().audioModernBox,children:(0,t.jsxs)("div",{className:u().customAudioPlayer,children:[(0,t.jsxs)("div",{className:u().audioPlayerRow,children:[t.jsx("span",{className:u().audioTime,children:new Date(1e3*f).toISOString().substring(14,19)}),t.jsx("input",{type:"range",min:0,max:Math.min(15,z?15:U[Y]||U[U.length-1]),step:.01,value:f,onChange:e=>{if(M.current&&j){let a=Math.min(Number(e.target.value),15);M.current.currentTime=B+a,v(a)}},className:u().audioSeekbarCustom,disabled:!J}),t.jsx("span",{className:u().audioTime,children:new Date(1e3*Math.min(15,z?15:U[Y]||U[U.length-1])).toISOString().substring(14,19)})]}),(0,t.jsxs)("div",{className:u().audioVolumeRow,children:[t.jsx("button",{className:u().audioPlayBtnCustom,onClick:()=>{if(!M.current){console.log("\uD83C\uDFB5 PLAY - \xc1udio ref n\xe3o dispon\xedvel");return}console.log("\uD83C\uDFB5 PLAY - Tentando play/pause, isPlaying:",j);let e=M.current.currentTime-B,a=z?15:U[Y]||U[U.length-1];(e>=15||!z&&e>=a)&&(M.current.currentTime=B,v(0),console.log("\uD83C\uDFB5 PLAY - Resetando para o in\xedcio devido ao tempo limite")),j?(M.current.pause(),console.log("\uD83C\uDFB5 PLAY - Pausando \xe1udio")):((M.current.currentTime<B||M.current.currentTime>B+a)&&(M.current.currentTime=B,v(0),console.log("\uD83C\uDFB5 PLAY - Ajustando posi\xe7\xe3o antes de tocar")),M.current.play().then(()=>{console.log("\uD83C\uDFB5 PLAY - \xc1udio iniciado com sucesso")}).catch(e=>{console.error("\uD83C\uDFB5 PLAY - Erro ao iniciar \xe1udio:",e)}))},disabled:!J,children:j?t.jsx(m.Wh,{color:"#fff",size:20}):t.jsx(m.gmG,{color:"#fff",size:20})}),t.jsx(m.rxG,{color:"#fff",style:{marginRight:8}}),t.jsx("input",{type:"range",min:0,max:1,step:.01,value:T,onChange:e=>{R(Number(e.target.value)),M.current&&(M.current.volume=Number(e.target.value))},className:u().audioVolumeCustom})]}),t.jsx("audio",{ref:M,src:J?.audioUrl,style:{display:"none"},onError:()=>d.setError("Erro ao carregar \xe1udio")})]})}),t.jsx("div",{className:u().pointsInfo,children:(0,t.jsxs)("span",{className:u().pointsText,children:[0===Y?"6 pontos":1===Y?"5 pontos":2===Y?"4 pontos":3===Y?"3 pontos":4===Y?"2 pontos":5===Y?"1 ponto":"0 pontos",Y<6&&" se acertar agora"]})}),(0,t.jsxs)("div",{className:u().attemptsRow,children:[[...Array(6)].map((e,a)=>{let r=u().attemptInactive;if(0===a&&console.log("\uD83C\uDFA8 DEBUG - Estado das tentativas:",{nickname:p,myAttempts:Y,guesses:P?.guesses?.[p],roundWinners:F}),a<Y){let e=(P?.guesses?.[p]||[])[a];console.log("\uD83C\uDFA8 COLOR - Tentativa",a+1,":",e),e?e.correct&&!e.tooLate?(r=u().attemptSuccess,console.log("\uD83C\uDFA8 COLOR - Verde (acertou)")):e.gameCorrect&&!e.correct?(r=u().attemptGame,console.log("\uD83C\uDFA8 COLOR - Amarelo (jogo correto)")):"skipped"===e.type?(r=u().attemptFail,console.log("\uD83C\uDFA8 COLOR - Vermelho (skip)")):(r=u().attemptFail,console.log("\uD83C\uDFA8 COLOR - Vermelho (erro/tarde)")):z&&a===Y-1?(r=u().attemptSuccess,console.log("\uD83C\uDFA8 COLOR - Verde (fallback - vencedor)")):(r=u().attemptFail,console.log("\uD83C\uDFA8 COLOR - Vermelho (fallback)"))}let o=(P?.guesses?.[p]||[])[a],s=o?"skipped"===o.type?"Pulou":o.guess:"";return t.jsx("button",{type:"button",className:`${u().attemptButton} ${r}`,disabled:!0,title:s,style:{cursor:s?"help":"default"},children:a+1},a)}),(0,t.jsxs)("button",{type:"button",className:`${u().attemptButton} ${u().attemptInactive}`,onClick:Q,disabled:I||Y>=6||z,style:{marginLeft:"10px"},children:[r?a("skip"):"Pular"," ",t.jsx(m.uE0,{style:{marginLeft:4,fontSize:"1em",verticalAlign:"middle"}})]})]}),I||z?z&&!I?(0,t.jsxs)("div",{className:`${c().message} ${c().messageSuccess}`,children:[t.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"10px"},children:"\uD83C\uDF89 Parab\xe9ns! Voc\xea acertou!"}),t.jsx("div",{style:{fontSize:"1rem",marginBottom:"15px"},children:(0,t.jsxs)("strong",{children:[J?.game," - ",J?.title]})}),(0,t.jsxs)("div",{className:c().pointsEarned,children:["+",Math.max(0,6-Y+1)," pontos!"]}),t.jsx("div",{style:{marginTop:"15px",fontSize:"0.9rem",opacity:.8},children:"Aguardando outros jogadores terminarem suas tentativas..."}),(0,t.jsxs)("div",{style:{marginTop:"20px",fontSize:"0.85rem"},children:[t.jsx("div",{style:{marginBottom:"10px",fontWeight:"bold",color:"#4ecdc4"},children:"Suas tentativas:"}),t.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"10px",maxHeight:"120px",overflowY:"auto"},children:P?.guesses?.[p]?.length>0?P.guesses[p].map((e,a)=>(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px",padding:"4px 8px",borderRadius:"4px",background:e.correct?"rgba(76, 175, 80, 0.2)":e.gameCorrect?"rgba(255, 193, 7, 0.2)":"skipped"===e.type?"rgba(158, 158, 158, 0.2)":"rgba(244, 67, 54, 0.2)",border:`1px solid ${e.correct?"rgba(76, 175, 80, 0.4)":e.gameCorrect?"rgba(255, 193, 7, 0.4)":"skipped"===e.type?"rgba(158, 158, 158, 0.4)":"rgba(244, 67, 54, 0.4)"}`},children:[t.jsx("span",{style:{color:e.correct?"#4caf50":e.gameCorrect?"#ffc107":"skipped"===e.type?"#9e9e9e":"#f44336"},children:"skipped"===e.type?"⏭️ Pulou":e.guess}),t.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:e.correct?"✅":e.gameCorrect?"\uD83C\uDFAE":"skipped"===e.type?"⏭️":"❌"})]},a)):t.jsx("div",{style:{textAlign:"center",opacity:.6},children:"Nenhuma tentativa ainda"})})]}),(0,t.jsxs)("div",{style:{marginTop:"15px",fontSize:"0.8rem",opacity:.7},children:[t.jsx("div",{style:{marginBottom:"5px"},children:"Status dos jogadores:"}),g?.players?.map(e=>{let a=P?.attempts?.[e]||0,r=F.includes(e),o=r||a>=6;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px",color:r?"#4caf50":o?"#ff9800":"#ccc"},children:[t.jsxs("span",{children:[e,":"]}),t.jsx("span",{children:r?"✅ Acertou":o?"❌ Terminou":`${a}/6 tentativas`})]},e)})]})]}):(0,t.jsxs)("div",{className:`${c().message} ${F.includes("NONE")?c().messageWarning:c().messageSuccess}`,children:[F.includes("NONE")?r?a("no_one_guessed"):"Ningu\xe9m acertou a m\xfasica!":1===F.length?F[0]===p?r?a("congratulations"):"Parab\xe9ns! Voc\xea acertou!":`${F[0]} ${r?a("player_guessed_correctly"):"acertou a m\xfasica!"}`:F.length===g.players.length?"Todos acertaram!":`${F.length} jogadores acertaram: ${F.join(", ")}`,t.jsx("br",{}),(0,t.jsxs)("strong",{children:[J?.game," - ",J?.title]}),z&&(0,t.jsxs)("div",{className:c().pointsEarned,children:["+",Math.max(0,6-Y+1)," pontos!"]}),P?.guesses?.[p]?.length>0&&(0,t.jsxs)("div",{style:{marginTop:"20px",fontSize:"0.85rem"},children:[t.jsx("div",{style:{marginBottom:"10px",fontWeight:"bold",color:"#4ecdc4"},children:"Suas tentativas nesta rodada:"}),t.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"10px",maxHeight:"100px",overflowY:"auto"},children:P.guesses[p].map((e,a)=>(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px",padding:"3px 6px",borderRadius:"3px",background:e.correct?"rgba(76, 175, 80, 0.2)":e.gameCorrect?"rgba(255, 193, 7, 0.2)":"skipped"===e.type?"rgba(158, 158, 158, 0.2)":"rgba(244, 67, 54, 0.2)",fontSize:"0.8rem"},children:[(0,t.jsxs)("span",{style:{color:e.correct?"#4caf50":e.gameCorrect?"#ffc107":"skipped"===e.type?"#9e9e9e":"#f44336"},children:[a+1,". ","skipped"===e.type?"Pulou":e.guess]}),t.jsx("span",{style:{fontSize:"0.7rem"},children:e.correct?"✅":e.gameCorrect?"\uD83C\uDFAE":"skipped"===e.type?"⏭️":"❌"})]},a))})]})]}):t.jsx(t.Fragment,{children:(0,t.jsxs)("form",{onSubmit:Z,className:u().guessFormModern,autoComplete:"off",children:[t.jsx("input",{ref:L,type:"text",value:E,onChange:e=>{let a=e.target.value;h(a),X(a)},onFocus:()=>{E.trim()?X(E):(C(i.x.slice(0,10)),_(!0))},placeholder:r?a("song_input_placeholder"):"Digite o nome da m\xfasica...",disabled:Y>=6,className:u().guessInputModern,onBlur:()=>setTimeout(()=>_(!1),200)}),t.jsx("button",{type:"submit",disabled:Y>=6||!E.trim()||N,className:`${u().guessButtonModern} ${A?u().shake:""}`,children:N?"Enviando...":r?a("guess"):"Adivinhar"}),x&&D.length>0&&t.jsx("ul",{className:u().suggestionsListModern,children:D.map(e=>(0,t.jsxs)("li",{className:u().suggestionItemModern,onMouseDown:()=>H(e),children:[e.game," - ",e.title]},e.id))})]})}),I&&w&&t.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:t.jsx("button",{className:c().primaryButton,onClick:K,children:r?a("next_round"):"Pr\xf3xima Rodada"})}),I&&!w&&t.jsx("div",{className:`${c().message} ${c().messageInfo}`,children:"Aguardando anfitri\xe3o avan\xe7ar para a pr\xf3xima rodada..."}),Y>=6&&!I&&t.jsx("div",{className:`${c().message} ${c().messageWarning}`,children:"Voc\xea esgotou suas tentativas para esta rodada. Aguardando outros jogadores..."})]}),y&&t.jsx("div",{className:`${c().message} ${c().messageError}`,children:y})]})})})):(console.log("\uD83C\uDFAE GAME - Mostrando tela de loading"),t.jsx("div",{className:c().container,children:t.jsx("div",{className:c().content,children:(0,t.jsxs)("div",{className:c().loading,children:[t.jsx("div",{className:c().spinner}),r?a("loading"):"Carregando..."]})})}))}},8407:(e,a,r)=>{"use strict";r.d(a,{Z:()=>c});var t=r(997),o=r(6689),s=r(4746),n=r(9017),i=r(7663),l=r.n(i);let c=({onGameStart:e})=>{let{t:a,isClient:r}=(0,s.Z)(),{state:i,actions:c}=(0,n.p)(),{roomCode:d,playerNickname:u,lobbyData:m,isLoading:p,error:g}=i,[y,E]=(0,o.useState)({nickname:"",roomCode:""}),[h,x]=(0,o.useState)("menu");(0,o.useEffect)(()=>{m&&m.gameStarted&&"waiting"===h&&e()},[m?.gameStarted,e,h]);let _=e=>{let{name:a,value:r}=e.target;E(e=>({...e,[a]:r}))},D=async e=>{if(e.preventDefault(),!y.nickname.trim()){c.setError(r?a("nickname_required"):"Nickname \xe9 obrigat\xf3rio"),setTimeout(()=>c.setError(""),3e3);return}try{await c.createRoom(y.nickname.trim()),x("waiting"),c.setError("")}catch(e){setTimeout(()=>c.setError(""),5e3)}},C=async e=>{if(e.preventDefault(),!y.nickname.trim()){c.setError(r?a("nickname_required"):"Nickname \xe9 obrigat\xf3rio"),setTimeout(()=>c.setError(""),3e3);return}if(!y.roomCode.trim()){c.setError(r?a("room_code_required"):"C\xf3digo da sala \xe9 obrigat\xf3rio"),setTimeout(()=>c.setError(""),3e3);return}try{await c.joinRoom(y.roomCode.trim().toUpperCase(),y.nickname.trim()),x("waiting"),c.setError("")}catch(e){setTimeout(()=>c.setError(""),5e3)}},N=async()=>{if(console.log("\uD83C\uDFAE LOBBY - handleStartGame chamado"),p){console.log("\uD83C\uDFAE LOBBY - J\xe1 est\xe1 carregando, saindo...");return}console.log("\uD83C\uDFAE LOBBY - Chamando startGame...");try{await c.startGame(),console.log("\uD83C\uDFAE LOBBY - Sucesso! Chamando onGameStart..."),e(),console.log("\uD83C\uDFAE LOBBY - onGameStart chamado")}catch(e){console.log("\uD83C\uDFAE LOBBY - Erro:",e)}},S=async()=>{c.reset(),x("menu"),E({nickname:"",roomCode:""})},j=m?.host===u,b=(m?.players?.length||0)>=2;return"menu"===h?t.jsx("div",{className:l().container,children:t.jsx("div",{className:l().content,children:(0,t.jsxs)("div",{className:l().lobbyContainer,children:[t.jsx("h1",{className:l().title,children:r?a("multiplayer"):"Multiplayer"}),(0,t.jsxs)("div",{className:l().buttonGroup,children:[t.jsx("button",{className:l().primaryButton,onClick:()=>x("create"),disabled:p,children:r?a("create_room"):"Criar Sala"}),t.jsx("button",{className:l().secondaryButton,onClick:()=>x("join"),disabled:p,children:r?a("join_room"):"Entrar na Sala"})]}),g&&t.jsx("div",{className:`${l().message} ${l().messageError}`,children:g})]})})}):"create"===h?t.jsx("div",{className:l().container,children:t.jsx("div",{className:l().content,children:(0,t.jsxs)("div",{className:l().lobbyContainer,children:[t.jsx("h1",{className:l().title,children:r?a("create_room"):"Criar Sala"}),(0,t.jsxs)("form",{onSubmit:D,className:l().form,children:[(0,t.jsxs)("div",{className:l().inputGroup,children:[t.jsx("label",{className:l().label,children:r?a("nickname"):"Nickname"}),t.jsx("input",{type:"text",name:"nickname",value:y.nickname,onChange:_,placeholder:r?a("nickname"):"Seu nickname",className:l().input,maxLength:20,required:!0})]}),(0,t.jsxs)("div",{className:l().buttonGroup,children:[t.jsx("button",{type:"button",className:l().secondaryButton,onClick:()=>x("menu"),disabled:p,children:"Voltar"}),t.jsx("button",{type:"submit",className:l().primaryButton,disabled:p||!y.nickname.trim(),children:p?r?a("creating_room"):"Criando sala...":r?a("create_room"):"Criar Sala"})]})]}),g&&t.jsx("div",{className:`${l().message} ${l().messageError}`,children:g})]})})}):"join"===h?t.jsx("div",{className:l().container,children:t.jsx("div",{className:l().content,children:(0,t.jsxs)("div",{className:l().lobbyContainer,children:[t.jsx("h1",{className:l().title,children:r?a("join_room"):"Entrar na Sala"}),(0,t.jsxs)("form",{onSubmit:C,className:l().form,children:[(0,t.jsxs)("div",{className:l().inputGroup,children:[t.jsx("label",{className:l().label,children:r?a("nickname"):"Nickname"}),t.jsx("input",{type:"text",name:"nickname",value:y.nickname,onChange:_,placeholder:r?a("nickname"):"Seu nickname",className:l().input,maxLength:20,required:!0})]}),(0,t.jsxs)("div",{className:l().inputGroup,children:[t.jsx("label",{className:l().label,children:r?a("room_code"):"C\xf3digo da Sala"}),t.jsx("input",{type:"text",name:"roomCode",value:y.roomCode,onChange:_,placeholder:"ABC123",className:l().input,maxLength:6,style:{textTransform:"uppercase"},required:!0})]}),(0,t.jsxs)("div",{className:l().buttonGroup,children:[t.jsx("button",{type:"button",className:l().secondaryButton,onClick:()=>x("menu"),disabled:p,children:"Voltar"}),t.jsx("button",{type:"submit",className:l().primaryButton,disabled:p||!y.nickname.trim()||!y.roomCode.trim(),children:p?r?a("joining_room"):"Entrando na sala...":r?a("join_room"):"Entrar na Sala"})]})]}),g&&t.jsx("div",{className:`${l().message} ${l().messageError}`,children:g})]})})}):"waiting"===h&&m?t.jsx("div",{className:l().container,children:t.jsx("div",{className:l().content,children:(0,t.jsxs)("div",{className:l().waitingRoom,children:[t.jsx("h1",{className:l().title,children:r?a("waiting_for_players"):"Aguardando Jogadores"}),t.jsx("div",{className:l().roomCode,children:d}),t.jsx("p",{children:"Compartilhe este c\xf3digo com outros jogadores"}),(0,t.jsxs)("div",{className:l().playersList,children:[(0,t.jsxs)("h3",{className:l().playersTitle,children:[r?a("players_in_room"):"Jogadores na sala"," (",m?.players?.length||0,")"]}),m?.players?.map((e,a)=>t.jsxs("div",{className:l().playerItem,children:[t.jsx("span",{className:l().playerName,children:e}),e===m.host&&t.jsx("span",{className:l().hostBadge,children:"ANFITRI\xc3O"})]},a))||[]]}),j?(0,t.jsxs)("div",{className:l().buttonGroup,children:[t.jsx("button",{className:l().secondaryButton,onClick:S,disabled:p,children:r?a("leave_room"):"Sair da Sala"}),t.jsx("button",{className:l().primaryButton,onClick:N,disabled:p||!b,children:r?a("start_game"):"Iniciar Jogo"})]}):(0,t.jsxs)("div",{className:l().buttonGroup,children:[t.jsx("button",{className:l().secondaryButton,onClick:S,disabled:p,children:r?a("leave_room"):"Sair da Sala"}),t.jsx("div",{className:`${l().message} ${l().messageInfo}`,children:r?a("waiting_for_host"):"Aguardando anfitri\xe3o iniciar o jogo..."})]}),!b&&t.jsx("div",{className:`${l().message} ${l().messageWarning}`,children:r?a("minimum_players"):"M\xednimo 2 jogadores para iniciar"}),g&&t.jsx("div",{className:`${l().message} ${l().messageError}`,children:g})]})})}):t.jsx("div",{className:l().container,children:t.jsx("div",{className:l().content,children:(0,t.jsxs)("div",{className:l().loading,children:[t.jsx("div",{className:l().spinner}),r?a("loading"):"Carregando..."]})})})}},9017:(e,a,r)=>{"use strict";r.d(a,{P:()=>d,p:()=>u});var t=r(997),o=r(6689),s=r(5621);let n={roomCode:"",playerNickname:"",lobbyData:null,isLoading:!1,error:"",isConnected:!1,currentScreen:"lobby"},i={SET_ROOM_CODE:"SET_ROOM_CODE",SET_PLAYER_NICKNAME:"SET_PLAYER_NICKNAME",SET_LOBBY_DATA:"SET_LOBBY_DATA",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_CONNECTED:"SET_CONNECTED",SET_CURRENT_SCREEN:"SET_CURRENT_SCREEN",RESET:"RESET"};function l(e,a){switch(a.type){case i.SET_ROOM_CODE:return{...e,roomCode:a.payload};case i.SET_PLAYER_NICKNAME:return{...e,playerNickname:a.payload};case i.SET_LOBBY_DATA:return{...e,lobbyData:a.payload};case i.SET_LOADING:return{...e,isLoading:a.payload};case i.SET_ERROR:return{...e,error:a.payload};case i.SET_CONNECTED:return{...e,isConnected:a.payload};case i.SET_CURRENT_SCREEN:return{...e,currentScreen:a.payload};case i.RESET:return n;default:return e}}let c=(0,o.createContext)();function d({children:e}){let[a,r]=(0,o.useReducer)(l,n);return(0,o.useEffect)(()=>{if(!a.roomCode||!a.isConnected)return;let e=!0,t=0,o=async()=>{if(e)try{let o=await (0,s.Nv)(`/api/lobby?roomCode=${a.roomCode}`,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e)return;if(o.ok){let s=await o.json();e&&(s.roomNotFound?++t>=5&&r({type:i.SET_ERROR,payload:"Conex\xe3o perdida com a sala"}):(r({type:i.SET_LOBBY_DATA,payload:s}),t=0,a.error&&r({type:i.SET_ERROR,payload:""})))}else++t>=10&&e&&r({type:i.SET_ERROR,payload:"Problemas de conex\xe3o com o servidor"})}catch(a){++t>=5&&e&&r({type:i.SET_ERROR,payload:"Problemas de conex\xe3o"})}},n=setTimeout(o,500),l=setInterval(o,4e3);return()=>{e=!1,clearTimeout(n),clearInterval(l)}},[a.roomCode,a.isConnected]),t.jsx(c.Provider,{value:{state:a,actions:{setRoomCode:e=>r({type:i.SET_ROOM_CODE,payload:e}),setPlayerNickname:e=>r({type:i.SET_PLAYER_NICKNAME,payload:e}),setLobbyData:e=>r({type:i.SET_LOBBY_DATA,payload:e}),setLoading:e=>r({type:i.SET_LOADING,payload:e}),setError:e=>r({type:i.SET_ERROR,payload:e}),setConnected:e=>r({type:i.SET_CONNECTED,payload:e}),setCurrentScreen:e=>r({type:i.SET_CURRENT_SCREEN,payload:e}),reset:()=>r({type:i.RESET}),createRoom:async e=>{r({type:i.SET_LOADING,payload:!0}),r({type:i.SET_ERROR,payload:""});try{let a=await (0,s.Nv)("/api/lobby",{method:"POST",body:JSON.stringify({nickname:e})});if(a.ok){let t=await a.json();console.log("\uD83D\uDD04 CONTEXT - Resposta createRoom:",t),r({type:i.SET_ROOM_CODE,payload:t.roomCode}),r({type:i.SET_PLAYER_NICKNAME,payload:e}),r({type:i.SET_CONNECTED,payload:!0});let o=await (0,s.Nv)(`/api/lobby?roomCode=${t.roomCode}`);if(o.ok){let e=await o.json();r({type:i.SET_LOBBY_DATA,payload:e})}return t}{let e=await a.json();throw console.log("\uD83D\uDD04 CONTEXT - Erro createRoom:",e),r({type:i.SET_ERROR,payload:e.error||"Erro ao criar sala"}),Error(e.error)}}catch(e){throw console.log("\uD83D\uDD04 CONTEXT - Erro de conex\xe3o createRoom:",e),r({type:i.SET_ERROR,payload:"Erro de conex\xe3o"}),e}finally{r({type:i.SET_LOADING,payload:!1})}},joinRoom:async(e,a)=>{console.log("\uD83D\uDD04 CONTEXT - joinRoom chamado:",{roomCode:e,playerNickname:a}),r({type:i.SET_LOADING,payload:!0}),r({type:i.SET_ERROR,payload:""});try{let t={roomCode:e,nickname:a};console.log("\uD83D\uDD04 CONTEXT - Request body:",t),console.log("\uD83D\uDD04 CONTEXT - Request body JSON:",JSON.stringify(t));let o=await (0,s.Nv)("/api/lobby",{method:"PUT",body:JSON.stringify(t)});if(console.log("\uD83D\uDD04 CONTEXT - Response status:",o.status),console.log("\uD83D\uDD04 CONTEXT - Response ok:",o.ok),o.ok){let t=await o.json();return console.log("\uD83D\uDD04 CONTEXT - Response data:",t),r({type:i.SET_ROOM_CODE,payload:e}),r({type:i.SET_PLAYER_NICKNAME,payload:a}),r({type:i.SET_LOBBY_DATA,payload:t}),r({type:i.SET_CONNECTED,payload:!0}),t}{let e=await o.json();throw console.log("\uD83D\uDD04 CONTEXT - Error data:",e),r({type:i.SET_ERROR,payload:e.error||"Erro ao entrar na sala"}),Error(e.error)}}catch(e){throw console.log("\uD83D\uDD04 CONTEXT - Catch error:",e),r({type:i.SET_ERROR,payload:"Erro de conex\xe3o"}),e}finally{r({type:i.SET_LOADING,payload:!1})}},startGame:async()=>{if(a.roomCode){r({type:i.SET_LOADING,payload:!0}),r({type:i.SET_ERROR,payload:""});try{let e=await (0,s.Nv)("/api/lobby",{method:"PATCH",body:JSON.stringify({roomCode:a.roomCode,action:"start"})});if(e.ok){let a=await e.json();return r({type:i.SET_LOBBY_DATA,payload:a}),r({type:i.SET_CURRENT_SCREEN,payload:"game"}),a}{let a=await e.json();throw r({type:i.SET_ERROR,payload:a.error||"Erro ao iniciar jogo"}),Error(a.error)}}catch(e){throw r({type:i.SET_ERROR,payload:"Erro de conex\xe3o"}),e}finally{r({type:i.SET_LOADING,payload:!1})}}},makeGuess:async e=>{if(!a.roomCode||!a.playerNickname)return{success:!1,error:"Dados inv\xe1lidos"};try{let t=await (0,s.Nv)("/api/lobby",{method:"PATCH",body:JSON.stringify({roomCode:a.roomCode,action:"guess",nickname:a.playerNickname,guess:e})}),o=await t.json();if(t.ok)return o.lobbyData&&r({type:i.SET_LOBBY_DATA,payload:o.lobbyData}),{success:!0,correct:o.correct,gameCorrect:o.gameCorrect,winner:o.winner,attempts:o.attempts,tooLate:o.tooLate,message:o.message};return{success:!1,error:o.error}}catch(e){return{success:!1,error:"Erro de conex\xe3o"}}},nextRound:async()=>{if(!a.roomCode)return{success:!1,error:"Dados inv\xe1lidos"};try{let e=await (0,s.Nv)("/api/lobby",{method:"PATCH",body:JSON.stringify({roomCode:a.roomCode,action:"nextRound",nickname:a.playerNickname})}),t=await e.json();if(e.ok)return t.lobbyData&&r({type:i.SET_LOBBY_DATA,payload:t.lobbyData}),{success:!0};return r({type:i.SET_ERROR,payload:t.error||"Erro ao avan\xe7ar rodada"}),{success:!1,error:t.error}}catch(e){return r({type:i.SET_ERROR,payload:"Erro de conex\xe3o"}),{success:!1,error:"Erro de conex\xe3o"}}},skipRound:async()=>{if(!a.roomCode||!a.playerNickname)return{success:!1,error:"Dados inv\xe1lidos"};try{let e=await (0,s.Nv)("/api/lobby",{method:"PATCH",body:JSON.stringify({roomCode:a.roomCode,action:"skip",nickname:a.playerNickname})}),t=await e.json();if(e.ok)return t.lobbyData&&r({type:i.SET_LOBBY_DATA,payload:t.lobbyData}),{success:!0};return r({type:i.SET_ERROR,payload:t.error||"Erro ao pular rodada"}),{success:!1,error:t.error}}catch(e){return r({type:i.SET_ERROR,payload:"Erro de conex\xe3o"}),{success:!1,error:"Erro de conex\xe3o"}}}}},children:e})}function u(){let e=(0,o.useContext)(c);if(!e)throw Error("useMultiplayerContext deve ser usado dentro de MultiplayerProvider");return e}},5338:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>g});var o=r(997),s=r(968),n=r.n(s),i=r(4746),l=r(9017),c=r(8407),d=r(6418),u=r(238),m=e([u]);function p(){let{t:e,isClient:a}=(0,i.Z)(),{state:r,actions:t}=(0,l.p)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n(),{children:[o.jsx("title",{children:a?`${e("multiplayer")} - Bandle`:"Multiplayer - Bandle"}),o.jsx("meta",{name:"description",content:a?"Jogue Bandle com seus amigos! Adivinhe m\xfasicas de videogames em modo multiplayer.":"Play Bandle with your friends! Guess video game music in multiplayer mode."}),o.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),o.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[o.jsx("div",{style:{flex:1},children:"lobby"===r.currentScreen?o.jsx(c.Z,{onGameStart:()=>{console.log("\uD83C\uDFAE MULTIPLAYER - handleGameStart chamado, mudando estado para game"),t.setCurrentScreen("game"),console.log("\uD83C\uDFAE MULTIPLAYER - Estado mudado para game")}}):o.jsx(d.Z,{onBackToLobby:()=>{console.log("\uD83C\uDFAE MULTIPLAYER - handleBackToLobby chamado"),t.setCurrentScreen("lobby")}})}),o.jsx(u.Z,{})]})]})}function g(){return o.jsx(l.P,{children:o.jsx(p,{})})}u=(m.then?(await m)():m)[0],t()}catch(e){t(e)}})},5244:(e,a)=>{"use strict";var r;Object.defineProperty(a,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},7197:e=>{"use strict";e.exports=require("@fortawesome/react-fontawesome")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},303:e=>{"use strict";e.exports=import("@fortawesome/free-brands-svg-icons")},2765:e=>{"use strict";e.exports=import("@fortawesome/free-regular-svg-icons")},4563:e=>{"use strict";e.exports=import("@fortawesome/free-solid-svg-icons")},1017:e=>{"use strict";e.exports=require("path")}};var a=require("../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[859,66,790,978],()=>r(255));module.exports=t})();