"use strict";(()=>{var e={};e.id=781,e.ids=[781],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6544:e=>{e.exports=import("node-fetch")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},1358:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>c,default:()=>u,routeModule:()=>m});var n=a(1802),i=a(7153),o=a(6249),l=a(5037),s=e([l]);l=(s.then?(await s)():s)[0];let u=(0,o.l)(l,"default"),c=(0,o.l)(l,"config"),m=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/music-info",pathname:"/api/music-info",bundlePath:"",filename:""},userland:l});r()}catch(e){r(e)}})},5037:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>o});var n=a(6544),i=e([n]);n=(i.then?(await i)():i)[0];let s=e=>new Promise(t=>setTimeout(t,e));async function o(e,t){let{title:a,game:r}=e.query;if(!a||!r)return t.status(400).json({error:"Title and game are required"});try{let e=encodeURIComponent(`${r} ${a}`),i=await (0,n.default)(`https://vgmdb.net/search?q=${e}`,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9"}});if(!i.ok)throw Error(`Failed to fetch from VGMdb: ${i.status}`);let o=(await i.text()).match(/href="(\/album\/\d+)"/);if(!o)return t.status(404).json({error:"No results found",searchQuery:`${r} ${a}`});await s(2e3);let u=`https://vgmdb.net${o[1]}`,c=await (0,n.default)(u,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9"}});if(!c.ok)throw Error(`Failed to fetch album details: ${c.status}`);let m=await c.text(),d=m.match(/<h1[^>]*>([^<]+)<\/h1>/),p=m.match(/Composer<\/b><\/td>\s*<td[^>]*>([^<]+)/),f=m.match(/Release Date<\/b><\/td>\s*<td[^>]*>(\d{4})-/),h=m.match(/Platform<\/b><\/td>\s*<td[^>]*>([^<]+)<\/td>/),g={artist:p?l(p[1]):"Unknown Artist",year:f?f[1]:"Unknown Year",album:d?l(d[1]):"Unknown Album",console:h?l(h[1]):"Unknown Platform",debug:{url:u,query:`${r} ${a}`}};if("Unknown Year"!==g.year){let e=parseInt(g.year);(e<1970||e>new Date().getFullYear())&&(g.year="Unknown Year")}t.status(200).json(g)}catch(e){console.error("Error fetching from VGMdb:",e),t.status(500).json({error:"Failed to fetch music info",message:e.message})}}function l(e){return e.replace(/<[^>]*>/g,"").replace(/&[^;]+;/g,"").replace(/\s+/g," ").trim()}r()}catch(e){r(e)}})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=1358);module.exports=a})();